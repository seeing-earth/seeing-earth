<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8' />
  <title>Home - A Better World</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet' />
  <link href='/css/style.css' rel='stylesheet' type="text/css"/>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css">

  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }
  </style>
  <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.2.0/mapbox-gl-geocoder.min.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.2.0/mapbox-gl-geocoder.css' type='text/css' />
</head>

<body>
  <div id='map'>
  </div>
  <div id="logoContainer">
     <img id="logo" src="../assets/home-logo.png"><h1 id="header">home</h1>
   </div>

  <nav id="controller">
    <section id="menu">
        <a class="tab active" href="#act" id="actTab">Act</a>
        <a class="tab" href="#chat" id="chatTab">Chat</a>
    </section>
    <section id="actSection">

    <ul class="top-level">

      <details>
        <summary>
          <img class="itemIcon" src="/assets/flame.png" /> Top Priorities
        </summary>

        <ul class="2nd-level">
        <details>
          <summary>Restorative Justice System</summary>
          <p><strong>Spread the word via email, text, or FB</strong></p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>

        <details>
          <summary>Reduce Meat Consumption</summary>
          <p>Spread the word via email, text, or FB</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>
      </ul>
      </details>

      <details>
        <summary>
          <img class="itemIcon" src="/assets/team.png" /> Community Values
        </summary>

        <ul class="2nd-level">
        <details>
          <summary>Restorative Justice System</summary>
          <p><strong>Spread the word via email, text, or FB</strong></p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>

        <details>
          <summary>Reduce Meat Consumption</summary>
          <p>Spread the word via email, text, or FB</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>
      </ul>
      </details>

      <details>
        <summary>
          <img class="itemIcon" src="/assets/agriculture.png" /> Food + Nature
        </summary>

        <ul class="2nd-level">
        <details>
          <summary>Restorative Justice System</summary>
          <p><strong>Spread the word via email, text, or FB</strong></p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>

        <details>
          <summary>Reduce Meat Consumption</summary>
          <p>Spread the word via email, text, or FB</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>
      </ul>
      </details>

      <details>
        <summary>
          <img class="itemIcon" src="/assets/business.png" /> Business
        </summary>

        <ul class="2nd-level">
        <details>
          <summary>Restorative Justice System</summary>
          <p><strong>Spread the word via email, text, or FB</strong></p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>

        <details>
          <summary>Reduce Meat Consumption</summary>
          <p>Spread the word via email, text, or FB</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>
      </ul>
      </details>

      <details>
        <summary>
          <img class="itemIcon" src="/assets/buildings.png" /> Homes + Buildings
        </summary>

        <ul class="2nd-level">
        <details>
          <summary>Restorative Justice System</summary>
          <p><strong>Spread the word via email, text, or FB</strong></p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>

        <details>
          <summary>Reduce Meat Consumption</summary>
          <p>Spread the word via email, text, or FB</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>
      </ul>
      </details>

      <details>
        <summary>
          <img class="itemIcon" src="/assets/curve.png" /> Transportation
        </summary>

        <ul class="2nd-level">
        <details>
          <summary>Restorative Justice System</summary>
          <p><strong>Spread the word via email, text, or FB</strong></p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>

        <details>
          <summary>Reduce Meat Consumption</summary>
          <p>Spread the word via email, text, or FB</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>
      </ul>
      </details>

      <details>
        <summary>
          <img class="itemIcon" src="/assets/buildings.png" /> Energy
        </summary>

        <ul class="2nd-level">
        <details>
          <summary>Restorative Justice System</summary>
          <p><strong>Spread the word via email, text, or FB</strong></p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>

        <details>
          <summary>Reduce Meat Consumption</summary>
          <p>Spread the word via email, text, or FB</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
          <p>Intro Text This is how we have to fix this etc.</p>
        </details>
      </ul>
      </details>

    </ul>

  </section>

  <section id="chatSection" style="display: none;">
    <iframe src="https://titanembeds.com/embed/726604157607477340?theme=DiscordDark" height="600" width="360" frameborder="0"></iframe>
  </section>

</nav>

  <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoibGV0b3VycG93ZXJzY29tYmluZSIsImEiOiJjazFmN3N0eTUwb3JwM2JwYWk4ZXB1enNtIn0._UjpOqZIeiWqhscosubipw';
        var map = new mapboxgl.Map({
          container: 'map', // Container ID
          style: 'mapbox://styles/mapbox/streets-v11', // Map style to use
          center: [-77.0365, 38.8940], // Starting position [lng, lat]
          zoom: 13, // Starting zoom level

          // coodinates and zoom for global map:
          // center: [-36.98, 38.38], // Starting position [lng, lat]
          // zoom: 2.6, // Starting zoom level
        });

        var geocoder = new MapboxGeocoder({ // Initialize the geocoder
        accessToken: mapboxgl.accessToken, // Set the access token
        placeholder: 'Search anywhere',
        //bbox: [-122.30937, 37.84214, -122.23715, 37.89838], // Boundary for Berkeley
        proximity: {
          longitude: -122.25948,
          latitude: 37.87221
        }, // Coordinates of UC Berkeley
        mapboxgl: mapboxgl, // Set the mapbox-gl instance
        marker: false, // Do not use the default marker style
      });

      // Add the geocoder to the map
      map.addControl(geocoder, 'top-left');

      // add a source layer and default styling for a single point
      map.on('load', function() {
       map.addSource('single-point', {
         type: 'geojson',
         data: {
           type: 'FeatureCollection',
           features: []
         }
       });

       map.addLayer({
         id: 'point',
         source: 'single-point',
         type: 'circle',
         paint: {
           'circle-radius': 10,
           'circle-color': '#448ee4'
         }
       });

       // Listen for the `result` event from the Geocoder
       // `result` event is triggered when a user makes a selection
       //  Add a marker at the result's coordinates
       geocoder.on('result', function(e) {
         map.getSource('single-point').setData(e.result.geometry);

         var acc = document.getElementsByClassName("categoryPanel");
         var searchPrompts = document.getElementsByClassName("searchPrompt");
         var subCategories = document.getElementsByClassName("subCategories");
         var i;

         for (i = 0; i < acc.length; i++) {
           acc[i].classList.add('searched');
           searchPrompts[i].setAttribute('style', 'display: none;');
           subCategories[i].setAttribute('style', 'display: block;');
         }

       });
      });
</script>

<script>

// link to js: https://jsbin.com/defidih/edit?js,console,output

var tabs = document.getElementsByClassName('tab');

for(j = 0; j < tabs.length; j++) {
  // attach event listener to all tabs
  tabs[j].addEventListener('click', clickTab)
}

// event listener function
function clickTab (e) {

  var tabID = e.currentTarget.id
  var chatSection = document.getElementById('chatSection');
  var actSection = document.getElementById('actSection');
  // var pageID = tabID.replace('t','p')

  console.log(tabID);

  for (i = 0; i < tabs.length; i++) {
    // deactivate all tabs
    tabs[i].classList.remove('active')
  }

  // activate current tab
  e.currentTarget.classList.add('active')

  if (tabID === "chatTab") {

    console.log('found chat')

    chatSection.style.display = "block";
    actSection.style.display = "none";
  }

  else {
    actSection.style.display = "block";
    chatSection.style.display = "none";
  }

  // show current page
  // var currentPage = document.querySelector('#'+pageID)
  // currentPage.classList.add('active')

}

</script>

</body>
</html>
